// Generated by CoffeeScript 1.12.5
var childProcess, exec, fs, i3, log, path, reload, write;

childProcess = require('child_process');

exec = childProcess.exec;

fs = require('fs');

write = fs.writeFile;

i3 = require('i3').createClient();

log = console.log;

path = '/tmp/i3-workspaces-all.txt';

fs.writeFile(path, '', function() {});

reload = function() {
  return exec('i3-msg -t get_workspaces', [], function(err, stdout, stderr) {
    var i, len, mas, mas2, work;
    mas = JSON.parse(stdout);
    mas2 = [];
    for (i = 0, len = mas.length; i < len; i++) {
      work = mas[i];
      mas2[work.num + 1 - 1] = work.name;
    }
    fs.writeFile(path, '', function() {});
    return fs.writeFile(path, mas2.join('\n'));
  });
};

reload();

i3.on('workspace', function() {
  return reload();
});
